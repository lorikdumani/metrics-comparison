Id;PostId;UserId;PostHistoryTypeId;RevisionGUID;CreationDate;Text;UserDisplayName;Comment
78973841;27270722;1915323;2;037a5949-4430-4c1f-8182-135c364452bf;2014-12-03 11:33:52.0;"I recently started updating my app to use the new Toolbar component introduced in Android 5.0 with navigation drawer. Flow of app is : MainActivity which has a toolbar, navigation drawer with menu 1. Home  2. Cart.&#xD;&#xA;&#xD;&#xA;Home Menu navigates to ""Home Detail"" through a button in it.&#xD;&#xA;&#xD;&#xA;Layout of ""MainActivity"" :&#xD;&#xA;&#xD;&#xA;    <LinearLayout xmlns:android=""http://schemas.android.com/apk/res/android""&#xD;&#xA;    xmlns:tools=""http://schemas.android.com/tools""&#xD;&#xA;    android:layout_width=""match_parent""&#xD;&#xA;    android:layout_height=""match_parent""&#xD;&#xA;    android:orientation=""vertical"">&#xD;&#xA;    <include&#xD;&#xA;        android:id=""@+id/toolbar""&#xD;&#xA;        layout=""@layout/toolbar"" />&#xD;&#xA;    <android.support.v4.widget.DrawerLayout&#xD;&#xA;        android:id=""@+id/drawer""&#xD;&#xA;        android:layout_width=""match_parent""&#xD;&#xA;        android:layout_height=""match_parent"" >&#xD;&#xA;        <FrameLayout android:id=""@+id/activity_frame"" &#xD;&#xA;             android:layout_width=""match_parent""&#xD;&#xA;            android:layout_height=""match_parent""/>&#xD;&#xA;        <ListView&#xD;&#xA;            android:id=""@+id/left_drawer""&#xD;&#xA;            android:layout_width=""match_parent""&#xD;&#xA;            android:layout_height=""match_parent""&#xD;&#xA;            android:layout_gravity=""start""&#xD;&#xA;            android:background=""@android:color/white""&#xD;&#xA;            android:choiceMode=""singleChoice""&#xD;&#xA;            android:divider=""@android:color/transparent""&#xD;&#xA;            android:dividerHeight=""0dp""&#xD;&#xA;            android:listSelector=""@android:color/transparent"" />&#xD;&#xA;    </android.support.v4.widget.DrawerLayout>&#xD;&#xA;</LinearLayout>&#xD;&#xA;&#xD;&#xA;I am adding two fragments HomeFragment,CartFragment on ""MainActivity"" on menu selected from drawer as below, default selection is position 0 i.e ""Home""&#xD;&#xA;&#xD;&#xA;class ""MainActivity.java"" ::&#xD;&#xA;&#xD;&#xA;    public void SelectItem(int possition) {&#xD;&#xA;		Fragment fragment = null;&#xD;&#xA;		switch (possition) {&#xD;&#xA;			case 0:&#xD;&#xA;				fragment = new HomeFragment();&#xD;&#xA;				break;&#xD;&#xA;			case 1:&#xD;&#xA;				fragment = new CartFragment();&#xD;&#xA;				break;&#xD;&#xA;		}	&#xD;&#xA;		mDrawerToggle.setDrawerIndicatorEnabled(true);&#xD;&#xA;		FragmentManager frgManager = getSupportFragmentManager();&#xD;&#xA;		FragmentTransaction ft  = frgManager.beginTransaction();		&#xD;&#xA;		ft.replace(R.id.activity_frame, fragment).commit();&#xD;&#xA;		drawer.closeDrawer(mDrawerList);&#xD;&#xA;	}&#xD;&#xA;	@Override&#xD;&#xA;	public boolean onCreateOptionsMenu(Menu menu) {	&#xD;&#xA;		Log.v( ""Tag"", ""onCreateOptionsMenu"" );&#xD;&#xA;		return super.onCreateOptionsMenu(menu);&#xD;&#xA;	}&#xD;&#xA;	@Override&#xD;&#xA;	public boolean onOptionsItemSelected(MenuItem item) {&#xD;&#xA;		 Log.v( ""Tag"", ""onOptionsItemSelected"" );&#xD;&#xA;	    return  super.onOptionsItemSelected( item );&#xD;&#xA;	}&#xD;&#xA;	@Override&#xD;&#xA;	public void onBackPressed() {&#xD;&#xA;	    super.onBackPressed();&#xD;&#xA;	    // turn on the Navigation Drawer image; &#xD;&#xA;	   mDrawerToggle.setDrawerIndicatorEnabled(true);&#xD;&#xA;	}&#xD;&#xA;	public void showDrawerIndicator(boolean show){&#xD;&#xA;		if(show)&#xD;&#xA;			mDrawerToggle.setDrawerIndicatorEnabled(true);&#xD;&#xA;		else&#xD;&#xA;			mDrawerToggle.setDrawerIndicatorEnabled(false);&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;My home fragment has button ""Detail"" on click of button,replaces to other fragment :""HomeDetailFragment"" &#xD;&#xA;&#xD;&#xA;    <LinearLayout xmlns:android=""http://schemas.android.com/apk/res/android""&#xD;&#xA;    android:layout_width=""match_parent""&#xD;&#xA;    android:layout_height=""match_parent""&#xD;&#xA;    android:orientation=""vertical"" >&#xD;&#xA;    <Button&#xD;&#xA;        android:id=""@+id/btnDetail""&#xD;&#xA;        android:layout_width=""wrap_content""&#xD;&#xA;        android:layout_height=""wrap_content""&#xD;&#xA;        android:text=""Home detail"" />&#xD;&#xA;    <FrameLayout&#xD;&#xA;        android:id=""@+id/home_frame_container""&#xD;&#xA;        android:layout_width=""match_parent""&#xD;&#xA;        android:layout_height=""match_parent"" />&#xD;&#xA;    </LinearLayout>&#xD;&#xA;&#xD;&#xA;class ""HomeFragment.java"" btnDetail click event which replace to other fragment ""HomeDetailFragment""::&#xD;&#xA;&#xD;&#xA;    btnDetail.setOnClickListener(new View.OnClickListener() {			&#xD;&#xA;			@Override&#xD;&#xA;			public void onClick(View v) {&#xD;&#xA;				// TODO Auto-generated method stub&#xD;&#xA;				&#xD;&#xA;				Fragment fragment = new HomeDetailFragment();&#xD;&#xA;				((MainActivity)getActivity()).showDrawerIndicator(false);&#xD;&#xA;				FragmentManager frManager = getActivity().getSupportFragmentManager();&#xD;&#xA;				FragmentTransaction ft  = frManager.beginTransaction();&#xD;&#xA;				ft.addToBackStack(null);&#xD;&#xA;				ft.replace(R.id.activity_frame, fragment).commit();&#xD;&#xA;			}&#xD;&#xA;	});&#xD;&#xA;&#xD;&#xA;class ""HomeDetailFragment.java"" ::&#xD;&#xA;&#xD;&#xA;    @Override&#xD;&#xA;	public void onCreate(Bundle savedInstanceState) {&#xD;&#xA;	    super.onCreate(savedInstanceState);&#xD;&#xA;	    setHasOptionsMenu(true);    &#xD;&#xA;	    // update the actionbar to show the up carat/affordance &#xD;&#xA;	    ((MainActivity)getActivity()).getSupportActionBar().setDisplayHomeAsUpEnabled(true);&#xD;&#xA;	}&#xD;&#xA;	@Override&#xD;&#xA;	public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {&#xD;&#xA;		// TODO Auto-generated method stub&#xD;&#xA;		super.onCreateOptionsMenu(menu, inflater);&#xD;&#xA;	}&#xD;&#xA;	@Override&#xD;&#xA;	public boolean onOptionsItemSelected(MenuItem item) {		&#xD;&#xA;		switch (item.getItemId()) {&#xD;&#xA;        case android.R.id.home:    &#xD;&#xA;		        // your code for order here&#xD;&#xA;		    Toast.makeText(getActivity(), ""home detail"", Toast.LENGTH_LONG).show();	&#xD;&#xA;		    ((MainActivity)getActivity()).onBackPressed();	    	&#xD;&#xA;         return true;&#xD;&#xA;		}&#xD;&#xA;		return true;&#xD;&#xA;	}&#xD;&#xA;**My problems ::**&#xD;&#xA;&#xD;&#xA;**1. In ""HomeDetailFragment"", I can see the ""UP home icon"" but cannot get the click event of home icon `onOptionsItemSelected` not being called, so cant navigate back to HomeFragment**&#xD;&#xA;&#xD;&#xA;**2. When pressing the Phone Back Button, and again navigating to ""Home Detail"" it is not showing ""UP home icon""**&#xD;&#xA;&#xD;&#xA;Please guide me.";;
79047764;27270722;1915323;5;b5d82328-6d94-447e-bfc3-021e7d615b0a;2014-12-04 09:28:53.0;"I recently started updating my app to use the new Toolbar component introduced in Android 5.0 with navigation drawer. Flow of app is : MainActivity which has a toolbar, navigation drawer with menu 1. Home  2. Cart.&#xD;&#xA;&#xD;&#xA;Home Menu navigates to ""Home Detail"" through a button in it.&#xD;&#xA;&#xD;&#xA;Layout of ""MainActivity"" :&#xD;&#xA;&#xD;&#xA;    <LinearLayout xmlns:android=""http://schemas.android.com/apk/res/android""&#xD;&#xA;    xmlns:tools=""http://schemas.android.com/tools""&#xD;&#xA;    android:layout_width=""match_parent""&#xD;&#xA;    android:layout_height=""match_parent""&#xD;&#xA;    android:orientation=""vertical"">&#xD;&#xA;    <include&#xD;&#xA;        android:id=""@+id/toolbar""&#xD;&#xA;        layout=""@layout/toolbar"" />&#xD;&#xA;    <android.support.v4.widget.DrawerLayout&#xD;&#xA;        android:id=""@+id/drawer""&#xD;&#xA;        android:layout_width=""match_parent""&#xD;&#xA;        android:layout_height=""match_parent"" >&#xD;&#xA;        <FrameLayout android:id=""@+id/activity_frame"" &#xD;&#xA;             android:layout_width=""match_parent""&#xD;&#xA;            android:layout_height=""match_parent""/>&#xD;&#xA;        <ListView&#xD;&#xA;            android:id=""@+id/left_drawer""&#xD;&#xA;            android:layout_width=""match_parent""&#xD;&#xA;            android:layout_height=""match_parent""&#xD;&#xA;            android:layout_gravity=""start""&#xD;&#xA;            android:background=""@android:color/white""&#xD;&#xA;            android:choiceMode=""singleChoice""&#xD;&#xA;            android:divider=""@android:color/transparent""&#xD;&#xA;            android:dividerHeight=""0dp""&#xD;&#xA;            android:listSelector=""@android:color/transparent"" />&#xD;&#xA;    </android.support.v4.widget.DrawerLayout>&#xD;&#xA;</LinearLayout>&#xD;&#xA;&#xD;&#xA;I am adding two fragments HomeFragment,CartFragment on ""MainActivity"" on menu selected from drawer as below, default selection is position 0 i.e ""Home""&#xD;&#xA;&#xD;&#xA;class ""MainActivity.java"" ::&#xD;&#xA;&#xD;&#xA;    @Override&#xD;&#xA;	protected void onCreate(Bundle savedInstanceState) {&#xD;&#xA;		super.onCreate(savedInstanceState);&#xD;&#xA;		setContentView(R.layout.activity_main);&#xD;&#xA;		mTitle = mDrawerTitle = getTitle();		&#xD;&#xA;		drawer = (DrawerLayout) findViewById(R.id.drawer);&#xD;&#xA;		mToolbar = (Toolbar) findViewById(R.id.toolbar);&#xD;&#xA;		tvTitle = (TextView) mToolbar.findViewById(R.id.toolbar_title);&#xD;&#xA;		if (mToolbar != null) {&#xD;&#xA;			setSupportActionBar(mToolbar);			&#xD;&#xA;		}		&#xD;&#xA;		mDrawerToggle = new ActionBarDrawerToggle(this, drawer,mToolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close) {&#xD;&#xA;			public void onDrawerClosed(View view) {&#xD;&#xA;				getSupportActionBar().setTitle(mTitle);&#xD;&#xA;			}&#xD;&#xA;&#xD;&#xA;			public void onDrawerOpened(View drawerView) {&#xD;&#xA;				getSupportActionBar().setTitle(mDrawerTitle);&#xD;&#xA;			}&#xD;&#xA;		};&#xD;&#xA;        drawer.setDrawerListener(mDrawerToggle);        &#xD;&#xA;        mDrawerList = (ListView) findViewById(R.id.left_drawer);	&#xD;&#xA;		dataList = new ArrayList<DrawerItem>();&#xD;&#xA;		dataList.add(new DrawerItem(Constants.V_HOME, R.drawable.ic_launcher));&#xD;&#xA;		dataList.add(new DrawerItem(Constants.V_MY_CART, R.drawable.ic_launcher));	&#xD;&#xA;		mDrawerList.setAdapter(adapterDrawer);		&#xD;&#xA;		mDrawerList.setOnItemClickListener(new DrawerItemClickListener());		&#xD;&#xA;		// to show first ""Home fragment"" on start up of application&#xD;&#xA;		if(savedInstanceState==null)&#xD;&#xA;			SelectItem(0);&#xD;&#xA;	}&#xD;&#xA;    public void SelectItem(int position) {&#xD;&#xA;		Fragment fragment = null;&#xD;&#xA;		switch (position) {&#xD;&#xA;		case 0:&#xD;&#xA;			fragment = new HomeFragment();&#xD;&#xA;			replaceFragment(fragment, Constants.V_TAG_HOME,false,""Home"");&#xD;&#xA;			break;&#xD;&#xA;		case 1:&#xD;&#xA;			fragment = new CartFragment();&#xD;&#xA;			replaceFragment(fragment, Constants.V_TAG_MY_CART,false,""My Cart"");&#xD;&#xA;			break;&#xD;&#xA;		}			&#xD;&#xA;		drawer.closeDrawer(mDrawerList);&#xD;&#xA;	}&#xD;&#xA;    public void replaceFragment(Fragment fragment,String fragment_tag,boolean showHome,String title){	&#xD;&#xA;		frgManager = this.getSupportFragmentManager();&#xD;&#xA;		FragmentTransaction ft  = frgManager.beginTransaction();&#xD;&#xA;		ft.replace(R.id.activity_frame,fragment,fragment_tag);		&#xD;&#xA;		if(showHome)&#xD;&#xA;			ft.addToBackStack(null);&#xD;&#xA;		ft.commit();			&#xD;&#xA;		shouldDisplayHomeUp(showHome);&#xD;&#xA;	}&#xD;&#xA;	public void shouldDisplayHomeUp(boolean showHome){&#xD;&#xA;		if(showHome){&#xD;&#xA;			mDrawerToggle.setDrawerIndicatorEnabled(false);&#xD;&#xA;			drawer.setDrawerLockMode(DrawerLayout.LOCK_MODE_LOCKED_CLOSED);&#xD;&#xA;			getSupportActionBar().setHomeButtonEnabled(true);	&#xD;&#xA;			getSupportActionBar().setDisplayHomeAsUpEnabled(true);&#xD;&#xA;		}else{&#xD;&#xA;			mDrawerToggle.setDrawerIndicatorEnabled(true);&#xD;&#xA;			drawer.setDrawerLockMode(DrawerLayout.LOCK_MODE_UNLOCKED);&#xD;&#xA;			getSupportActionBar().setDisplayHomeAsUpEnabled(false);&#xD;&#xA;            getSupportActionBar().setHomeButtonEnabled(false);&#xD;&#xA;		}&#xD;&#xA;	}&#xD;&#xA;    @Override&#xD;&#xA;	public boolean onCreateOptionsMenu(Menu menu) {			&#xD;&#xA;		getMenuInflater().inflate(R.menu.main, menu);&#xD;&#xA;	      return true;&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;	@Override&#xD;&#xA;	public boolean onOptionsItemSelected(MenuItem item) {	&#xD;&#xA;		switch (item.getItemId()) &#xD;&#xA;		   {        &#xD;&#xA;		      case android.R.id.home:            &#xD;&#xA;		    	   Toast.makeText(getApplicationContext(),""main act  clicked"", Toast.LENGTH_SHORT).show();      &#xD;&#xA;		         return false;        &#xD;&#xA;		      default:            &#xD;&#xA;		         return super.onOptionsItemSelected(item);    &#xD;&#xA;		   }&#xD;&#xA;	}&#xD;&#xA;    @Override&#xD;&#xA;	public void onBackPressed() {&#xD;&#xA;		// TODO Auto-generated method stub		&#xD;&#xA;		if(frgManager.getBackStackEntryCount()>0){		&#xD;&#xA;			   getSupportFragmentManager().popBackStack();		&#xD;&#xA;			   // show the drawer icon when on moving back &#xD;&#xA;			   shouldDisplayHomeUp(false);		   &#xD;&#xA;			}else{&#xD;&#xA;				super.onBackPressed();&#xD;&#xA;			}&#xD;&#xA;		mDrawerToggle.syncState();&#xD;&#xA;	}&#xD;&#xA;&#xD;&#xA;My home fragment has button ""Detail"" on click of button,replaces to other fragment :""HomeDetailFragment"" &#xD;&#xA;&#xD;&#xA;    <LinearLayout xmlns:android=""http://schemas.android.com/apk/res/android""&#xD;&#xA;    android:layout_width=""match_parent""&#xD;&#xA;    android:layout_height=""match_parent""&#xD;&#xA;    android:orientation=""vertical"" >&#xD;&#xA;    <Button&#xD;&#xA;        android:id=""@+id/btnDetail""&#xD;&#xA;        android:layout_width=""wrap_content""&#xD;&#xA;        android:layout_height=""wrap_content""&#xD;&#xA;        android:text=""Home detail"" />&#xD;&#xA;    <FrameLayout&#xD;&#xA;        android:id=""@+id/home_frame_container""&#xD;&#xA;        android:layout_width=""match_parent""&#xD;&#xA;        android:layout_height=""match_parent"" />&#xD;&#xA;    </LinearLayout>&#xD;&#xA;&#xD;&#xA;class ""HomeFragment.java"" btnDetail click event which replace to other fragment ""HomeDetailFragment""::&#xD;&#xA;&#xD;&#xA;    btnDetail.setOnClickListener(new View.OnClickListener() {			&#xD;&#xA;			@Override&#xD;&#xA;			public void onClick(View v) {&#xD;&#xA;				// TODO Auto-generated method stub&#xD;&#xA;				&#xD;&#xA;				Fragment fragment = new HomeDetailFragment();&#xD;&#xA;				((MainActivity)getActivity()).showDrawerIndicator(false);&#xD;&#xA;				FragmentManager frManager = getActivity().getSupportFragmentManager();&#xD;&#xA;				FragmentTransaction ft  = frManager.beginTransaction();&#xD;&#xA;				ft.addToBackStack(null);&#xD;&#xA;				ft.replace(R.id.activity_frame, fragment).commit();&#xD;&#xA;			}&#xD;&#xA;	});&#xD;&#xA;&#xD;&#xA;class ""HomeDetailFragment.java"" ::&#xD;&#xA;&#xD;&#xA;    @Override&#xD;&#xA;	public void onCreate(Bundle savedInstanceState) {&#xD;&#xA;	    super.onCreate(savedInstanceState);&#xD;&#xA;	    setHasOptionsMenu(true);    &#xD;&#xA;	    // update the actionbar to show the up carat/affordance &#xD;&#xA;	    ((MainActivity)getActivity()).getSupportActionBar().setDisplayHomeAsUpEnabled(true);&#xD;&#xA;	}&#xD;&#xA;	@Override&#xD;&#xA;	public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {&#xD;&#xA;		// TODO Auto-generated method stub&#xD;&#xA;		super.onCreateOptionsMenu(menu, inflater);&#xD;&#xA;	}&#xD;&#xA;	@Override&#xD;&#xA;	public boolean onOptionsItemSelected(MenuItem item) {		&#xD;&#xA;		switch (item.getItemId()) {&#xD;&#xA;        case android.R.id.home:    &#xD;&#xA;		        // your code for order here&#xD;&#xA;		    Toast.makeText(getActivity(), ""home detail"", Toast.LENGTH_LONG).show();	&#xD;&#xA;		    ((MainActivity)getActivity()).onBackPressed();	    	&#xD;&#xA;         return true;&#xD;&#xA;		}&#xD;&#xA;		return true;&#xD;&#xA;	}&#xD;&#xA;**My problems ::**&#xD;&#xA;&#xD;&#xA;**1. In ""HomeDetailFragment"", I can see the ""UP home icon"" but cannot get the click event of home icon `onOptionsItemSelected` not being called, so cant navigate back to HomeFragment**&#xD;&#xA;&#xD;&#xA;**2. When pressing the Phone Back Button, and again navigating to ""Home Detail"" it is not showing ""UP home icon""**&#xD;&#xA;&#xD;&#xA;Please guide me.";;added 2412 characters in body
